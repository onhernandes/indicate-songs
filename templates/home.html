{% extends 'base.html' %}

{% block content %}
	<div class="row profile">
		<div class="col-md-3">
			<div class="profile-sidebar">
				<!-- SIDEBAR USERPIC -->
				<div class="profile-userpic">
					<img src="{{user.images.0.url}}" class="img-responsive" alt="">
				</div>
				<!-- END SIDEBAR USERPIC -->
				<!-- SIDEBAR USER TITLE -->
				<div class="profile-usertitle">
					<div class="profile-usertitle-name">
						{{user.display_name}}
					</div>
				</div>

				<!-- SIDEBAR MENU -->
				<div class="profile-usermenu">
					<ul class="nav">
						<li class="active">
							<a href="#">
							<i class="glyphicon glyphicon-home"></i>
							Perfil </a>
						</li>
					</ul>
				</div>
				<!-- END MENU -->
			</div>
		</div>
		<div class="col-md-9">
			<input class="form-control input-search-friend" type="text" placeholder="Digite o nome do seu amigo...">
			<a href="javascript:searchFriend();" class="btn btn-success btn-search-friend">
				<i class="fa fa-search"></i>
			</a>
	        <div class="profile-content" style="margin-top: 40px;" id="friends">
	        </div>
		</div>
	</div>
	<script type="text/javascript">
		function searchFriend() {
			name = $('.input-search-friend').val();

			$.ajax({
				url: '/search/friend',
				method: 'POST',
				dataType: 'json',
				data: {'name': name},
				success: function(response) {
					html = '';

					for (i in response['users']) {	
			        	html += '<div class="row">';
			        	html += '	<div class="col-md-2">';
						html += '		<img src="' + response['users'][i]['url_image'] + '" class="img-responsive img-rounded" alt="">';
			        	html += '	</div>';
			        	html += '	<div class="col-md-10">';
			        	html += '		<h2>' + response['users'][i]['name'] + '</h2>';
			        	html += '		<a class="btn btn-primary">';
			        	html += '			<i class="fa fa-send"></i>';
			        	html += '		</a>';
			        	html += '	</div>';
			        	html += '</div>';
					}

					$('#friends').html(html);
				},
				error: function(error) {
					console.log(error);
				}
			});
		}
	</script>
{% endblock %}